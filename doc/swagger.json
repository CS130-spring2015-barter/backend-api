{
    "swagger": "2.0",
    "info": {
        "version": "0.1.0",
        "title": "Barter API"
    },
    "paths": {
        "/item/geo": {
            "get": {
                "parameters": [
                    {
                        "name": "user_id",
                        "in": "query",
                        "type": "string",
                        "required": true,
                        "description": "User to fetch new items for"
                    },
                    {
                        "name": "lat",
                        "in": "query",
                        "required": true,
                        "type": "number",
                        "format": "double"
                    },
                    {
                        "name": "long",
                        "in": "query",
                        "required": true,
                        "type": "number",
                        "format": "double"
                    },
                    {
                        "name": "n",
                        "description": "Maximum number of items to return",
                        "type": "integer",
                        "required": false,
                        "in": "query"
                    }
                ],
                "description": "Fetches geographically sorted items that a given user hasn't seen. If not specified, maximum number of items returned will be 20",
                "tags": [
                    "item"
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "title": "items",
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Item"
                            }
                        }
                    }
                }
            }
        },
        "/item": {
            "post": {
                "parameters": [
                    {
                        "in": "body",
                        "name": "item_info",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Item"
                        }
                    }
                ],
                "description": "Creates a new item posting",
                "tags": [
                    "item"
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "title": "item_id",
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/item/{item_id}": {
            "put": {
                "description": "Updates an existing item posting",
                "parameters": [
                    {
                        "in": "path",
                        "name": "item_id",
                        "description": "ID of item to update",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "body",
                        "name": "item_info",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Item"
                        }
                    }
                ],
                "tags": [
                    "item"
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            },
            "delete": {
                "description": "Removes a user's previously posted item",
                "parameters": [
                    {
                        "in": "path",
                        "name": "item_id",
                        "description": "ID of item to delete",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "query",
                        "name": "user_id",
                        "type": "string",
                        "required": true
                    }
                ],
                "tags": [
                    "item"
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            }
        },
        "/item/liked": {
            "post": {
                "parameters": [
                    {
                        "in": "body",
                        "required": true,
                        "name": "items",
                        "schema": {
                            "$ref": "#/definitions/Liked"
                        }
                    }
                ],
                "description": "Adds items that have been \"liked\" by a user.",
                "tags": [
                    "item"
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            }
        },
        "/item/seen": {
            "post": {
                "parameters": [
                    {
                        "in": "body",
                        "required": true,
                        "name": "item_ids",
                    },
                    {
                        "in": "body",
                        "required": true,
                        "name": "user_id",
                    }
                ],
                "description": "Adds items that have been \"seen\" by a user.",
                "tags": [
                    "item"
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            }
        },
        "/user": {
            "post": {
                "parameters": [
                    {
                        "name": "user",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/User"
                        }
                    }
                ],
                "description": "Registers a new user.",
                "tags": [
                    "user"
                ],
                "responses": {
                    "200": {
                        "description": "User registered"
                    },
                    "400": {
                        "description": "User failed to be registered"
                    }
                }
            }
        },
        "/user/{user_id}": {
            "get": {
                "description": "Gets information for a user",
                "tags": [
                    "user"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "user_id",
                        "description": "ID of user to fetch",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "title": "last",
                            "type": "string"
                        }
                    }
                }
            },
            "put": {
                "description": "Edits a user's information",
                "parameters": [
                    {
                        "in": "path",
                        "name": "user_id",
                        "description": "ID of user to edit",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "body",
                        "name": "user_info",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/UserEdit"
                        }
                    }
                ],
                "tags": [
                    "user"
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            },
            "delete": {
                "description": "Removes a user",
                "parameters": [
                    {
                        "in": "path",
                        "name": "user_id",
                        "description": "ID of user to delete",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "user"
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            }
        },
        "/user/login": {
            "post": {
                "description": "Creates a new user session. Returns user ID if successful, otherwise sends a 403 status. Expects 'email', 'hashed_password', 'lat', and 'long' in post body.",
                "tags": [
                    "user"
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "403": {
                        "description": "Login failed."
                    }
                }
            }
        },
        "/user/logout": {
            "post": {
                "description": "Terminates the current user session",
                "tags": [
                    "user"
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            }
        },
        "/chat": {
            "get": {
                "description": "Retrieves id for chat session between two users",
                "tags": [
                    "chat"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "chat_users",
                        "schema": {
                            "type": "array",
                            "items": {
                                "title": "user_id",
                                "type": "string"
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            },
            "post": {
                "description": "Create new chat session",
                "parameters": [
                    {
                        "in": "body",
                        "name": "chat_users",
                        "schema": {
                            "type": "array",
                            "items": {
                                "title": "user_id",
                                "type": "string"
                            }
                        }
                    }
                ],
                "tags": [
                    "chat"
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            }
        },
        "/chat/{sessionId}": {
            "delete": {
                "description": "Remove chat session",
                "parameters": [
                    {
                        "in": "path",
                        "name": "sessionId",
                        "description": "ID of session to delete",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "chat"
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            }
        }
    },
    "definitions": {
        "Item": {
            "required": [
                "user_id",
                "item_title",
                "item_description",
                "item_picture"
            ],
            "properties": {
                "user_id": {
                    "type": "string"
                },
                "item_title": {
                    "type": "string"
                },
                "item_description": {
                    "type": "string"
                },
                "item_picture": {
                    "type": "string",
                    "format": "byte"
                }
            }
        },
        "Liked": {
            "required": [
                "item_ids"
            ],
            "properties": {
                "item_ids": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "User": {
            "required": [
                "first",
                "last",
                "email",
                "hashed_password",
                "lat",
                "long"
            ],
            "properties": {
                "first": {
                    "type": "string"
                },
                "last": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "hashed_password": {
                    "type": "string"
                },
                "lat": {
                    "type": "number",
                    "format": "double"
                },
                "long": {
                    "type": "number",
                    "format": "double"
                },
                "about_me": {
                    "type": "string"
                },
                "image": {
                    "type": "string",
                    "format": "byte"
                }
            }
        },
        "UserEdit": {
            "properties": {
                "first": {
                    "type": "string",
                    "minimum": 0
                },
                "last": {
                    "type": "string",
                    "minimum": 0
                },
                "email": {
                    "type": "string",
                    "minimum": 0
                },
                "hashed_password": {
                    "type": "string",
                    "minimum": 0
                },
                "lat": {
                    "type": "number",
                    "format": "double",
                    "minimum": 0
                },
                "long": {
                    "type": "number",
                    "format": "double",
                    "minimum": 0
                },
                "about_me": {
                    "type": "string",
                    "minimum": 0
                },
                "image": {
                    "type": "string",
                    "format": "byte",
                    "minimum": 0
                }
            }
        }
    }
}
